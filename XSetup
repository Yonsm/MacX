#!/bin/sh
CDIR=$(cd "${0%/*}"; pwd)

echo "$CDIR/bin" | sudo tee /etc/paths.d/tools.admin.diy

sudo grep "admin ALL=(ALL) NOPASSWD: ALL" /etc/sudoers
if [ $? = 1 ]; then
    echo "admin ALL=(ALL) NOPASSWD: ALL" | sudo tee -a /etc/sudoers
fi

sudo spctl --master-disable

#defaults write com.apple.iTunes DeviceBackupsDisabled -bool YES
defaults write com.apple.desktopservices DSDontWriteNetworkStores true
defaults write com.apple.iTunes AutomaticDeviceBackupsDisabled -bool true

#$CDIR/RAMDISK.sh

exit

# Chrome + Baidu https://github.com/acgotaku/BaiduExporter
cd /Volumes/RAM && git clone https://github.com/CodeTips/BaiduNetdiskPlugin-macOS.git && cd /Volumes/RAM/BaiduNetdiskPlugin-macOS/Other && sed 's/\/Applications/\/Users\/admin\/Applications/g' Install.sh | sh

# Speed Test
cd $CDIR
curl -o speedtest https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py
chmod +x speedtest

# Brew
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew update

brew uinstall python3
pip3 install esptool
